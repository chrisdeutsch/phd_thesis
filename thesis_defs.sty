% Comma separator for multiple footnotes
\newcommand\fnsep{\textsuperscript{,}}

% Common text snippets
\newcommand*{\tauid}{tau~identification\xspace}
\newcommand*{\Tauid}{Tau~identification\xspace}
\newcommand*{\multijet}{multi-jet\xspace}
\newcommand*{\antiid}{Anti-ID\xspace}
\newcommand*{\antitau}{anti-\tauhadvis}
\newcommand*{\rnnscore}{\ensuremath{\text{RNN score}}\xspace}
\newcommand*{\CLs}{\ensuremath{\text{CL}_{\text{s}}}\xspace}
\newcommand*{\CLb}{\ensuremath{\text{CL}_{\text{b}}}\xspace}
\newcommand*{\CLsb}{\ensuremath{\text{CL}_{\text{s}+\text{b}}}\xspace}
\newcommand*{\qmutilde}{\ensuremath{\tilde{q}_{\mu}}\xspace}
\newcommand*{\xsecggfvbf}{\ensuremath{\sigma_{gg\text{F+VBF}}}\xspace}
\newcommand*{\pTreco}{\ensuremath{p_{\text{T}}^{\text{reco.}}}\xspace}
\newcommand*{\LOneTopo}{\textsc{L1Topo}\xspace}
\newcommand*{\FourJTwelve}{\textsc{4J12}\xspace}
\newcommand*{\ReLU}{\textsc{ReLU}\xspace}
\newcommand*{\deepsets}{\textsc{DeepSets}\xspace}

% Math operators
\DeclareMathOperator{\pois}{Pois}
\DeclareMathOperator{\cov}{Cov}
\DeclareMathOperator{\var}{Var}
\DeclareMathOperator{\expect}{E}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\diag}{diag}

% Double hat
\newlength{\dhatheight}
\newcommand{\doublehat}[1]{%
  \settoheight{\dhatheight}{\ensuremath{\hat{#1}}}%
  \addtolength{\dhatheight}{-0.2ex}%
  \hat{\vphantom{\rule{1pt}{\dhatheight}}%
    \smash{\hat{#1}}}}

% Bold vector working with latin and greek characters
% \newcommand*{\myvec}[1]{\ifstrequal{#1}{0}{\ensuremath{\mathbf{0}}}{\ensuremath{\boldsymbol{#1}}}}
\newcommand*{\myvec}[1]{\bm{#1}}

% A few useful definitions.
\newcommand{\mysim}{\sim\!}
\newcommand{\mysimeq}{\simeq\!}

\newcommand{\pho}{\phantom{0}}
\newcommand{\phplus}{\phantom{+}}

% Better is to use the commath or physics packages.
% \newcommand{\dif}{\text{d}}

% HEP units - assuming you are using siunitx
\DeclareSIUnit\clight{\text{\ensuremath{c}}}
\DeclareSIUnit[per-mode=symbol]\MeVovercsq{\MeV\per\clight\squared}
\DeclareSIUnit[per-mode=symbol]\GeVovercsq{\GeV\per\clight\squared}
\DeclareSIUnit\pb{\pico\barn}
\DeclareSIUnit\invpb{\per\pico\barn}

% Particles - see also the hepnicenames/heppennames/hepparticles packages.
\newcommand*{\KoS}{\ensuremath{K_{S}^{0}}\xspace}

% Particles
\newcommand*{\taulepton}{$\tau$-lepton\xspace}
\newcommand*{\tauleptons}{$\tau$-leptons\xspace}
\newcommand*{\PVB}{\HepParticle{V}{}{}\xspace}
\newcommand*{\PX}{\HepParticle{X}{}{}\xspace}
\newcommand*{\taulepvis}{\ensuremath{\tau_{\text{lep-vis}}}\xspace}
\newcommand*{\gammastar}{\ensuremath{\gamma^{*}}\xspace}

% Pseudo-particles
\newcommand*{\truetauhadvis}{\ensuremath{\text{true-}\tauhadvis}\xspace}
\newcommand*{\faketauhad}{\ensuremath{\text{fake-}\tauhadvis}\xspace}
\newcommand*{\faketauhadvis}{\ensuremath{\text{fake-}\tauhadvis}\xspace}
\newcommand*{\Faketauhadvis}{\ensuremath{\text{Fake-}\tauhadvis}\xspace}


% Production modes
\newcommand*{\ggF}{\ensuremath{gg\text{F}}\xspace}
\newcommand*{\VH}{\ensuremath{\PVB\PH}\xspace}
\newcommand*{\ttH}{\ensuremath{\ttbar\PH}\xspace}


% Processes
\newcommand*{\ZHF}{\PZ + HF\xspace}
\newcommand*{\ZLF}{\PZ + LF\xspace}
\newcommand*{\WW}{\ensuremath{\PW\PW}\xspace}
\newcommand*{\WZ}{\ensuremath{\PW\PZ}\xspace}
\newcommand*{\ZZ}{\ensuremath{\PZ\PZ}\xspace}
\newcommand*{\Vjets}{\ensuremath{V+\text{jets}}\xspace}
\newcommand*{\Zjets}{\ensuremath{\PZ+\text{jets}}\xspace}
\newcommand*{\Wjets}{\ensuremath{\PW+\text{jets}}\xspace}
\newcommand*{\bbtautau}{\ensuremath{\Pbottom\APbottom\APtauon\Ptauon}\xspace}
\newcommand*{\bbyy}{\ensuremath{\Pbottom\APbottom\Pphoton\Pphoton}\xspace}
\newcommand*{\bbbb}{\ensuremath{\Pbottom\APbottom\Pbottom\APbottom}\xspace}
\newcommand*{\ttbarFake}{\ttbar~+~\faketauhadvis}
\newcommand*{\ttbarFakes}{\ttbar~+~\faketauhadvis}
\newcommand*{\ttbarTrue}{\ttbar~+~\truetauhadvis}

\newcommand*{\jettotauhadvis}{\ensuremath{\text{jet}\rightarrow\tauhadvis}\xspace}
\newcommand*{\Jettotauhadvis}{\ensuremath{\text{Jet}\rightarrow\tauhadvis}\xspace}

% General ATLAS definitions
\newcommand*{\pTmiss}{\ensuremath{\myvec{p}_{\text{T}}^{\text{miss}}}\xspace}
\newcommand*{\pTmissAbs}{\ensuremath{p_{\text{T}}^{\text{miss}}}\xspace}
\newcommand*{\dRy}{\ensuremath{\Delta R_y}\xspace}
\newcommand*{\mll}{\ensuremath{m_{\ell\ell}}\xspace}
\newcommand*{\pTHLT}{\ensuremath{p_{\text{T, HLT}}}\xspace}
\newcommand*{\ETLone}{\ensuremath{E_{\text{T, L1}}}\xspace}
\newcommand*{\Ntracks}{\ensuremath{N_{\text{tracks}}}\xspace}

% Di-Higgs definitions
\newcommand*{\lephad}{\ensuremath{\taulep\tauhad}\xspace}
\newcommand*{\hadhad}{\ensuremath{\tauhad\tauhad}\xspace}
\newcommand*{\lambdahhh}{\ensuremath{\lambda_{HHH}}\xspace}
\newcommand*{\bbttlh}{\ensuremath{\bbbar\taulep\tauhad}\xspace}
\newcommand*{\bbtthh}{\ensuremath{\bbbar\tauhad\tauhad}\xspace}
\newcommand*{\HH}{\ensuremath{\PHiggs\PHiggs}\xspace}

\newcommand*{\FF}{\ensuremath{\text{FF}}\xspace}
\newcommand*{\FFqcd}{\ensuremath{\text{FF}_{\text{multi-jet}}}\xspace}
\newcommand*{\FFttbar}{\ensuremath{\text{FF}_{\ttbar}}\xspace}
\newcommand*{\FFcomb}{\ensuremath{\text{FF}_{\text{comb.}}}\xspace}
\newcommand*{\rqcd}{\ensuremath{r_{\text{multi-jet}}}\xspace}

% Kinematic variables
\newcommand*{\mHH}{\ensuremath{m_{HH}}\xspace}
\newcommand*{\mMMC}{\ensuremath{m_{\tau\tau}^\text{MMC}}\xspace}
\newcommand*{\mBB}{\ensuremath{m_{bb}}\xspace}
\newcommand*{\dRtautau}{\ensuremath{\Delta R(\tau, \tau)}\xspace}
\newcommand*{\dRbb}{\ensuremath{\Delta R(b, b)}\xspace}
\newcommand*{\mTW}{\ensuremath{m_{\text{T}}^W}\xspace}
\newcommand*{\pTvis}{\ensuremath{p_\text{T,vis}}\xspace}
\newcommand*{\mX}{\ensuremath{m_{\PX}}\xspace}
\newcommand*{\pTauTau}{\ensuremath{\myvec{p}_{\tau\tau}^\text{MMC}}\xspace}
\newcommand*{\pTLC}{\ensuremath{p_{\text{T}}^{\text{LC}}}\xspace}
\newcommand*{\pTvec}[1]{\ensuremath{\myvec{p}_{\text{T}}^{#1}}\xspace}

% Coupling modifiers
\newcommand*{\ktop}{\ensuremath{\kappa_{t}}\xspace}
\newcommand*{\klambda}{\ensuremath{\kappa_{\lambda}}\xspace}

% Theory
\newcommand*{\Acc}{\ensuremath{\mathcal{A}}\xspace}
\newcommand*{\Eff}{\ensuremath{\varepsilon}\xspace}
\newcommand*{\AccTimesEff}{\ensuremath{\mathcal{A} \times \varepsilon}\xspace}
\newcommand*{\FTapprox}{\ensuremath{\text{FT}_{\text{approx}}}\xspace}
\newcommand*{\mtop}{\ensuremath{m_{\text{top}}}\xspace}
\newcommand*{\lagrange}{\ensuremath{\mathcal{L}}\xspace}

% Miscellaneous

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}

\newcommand*{\muhat}{\ensuremath{\hat{\mu}}\xspace}
\newcommand*{\boldx}{\ensuremath{\myvec{x}}\xspace}
\newcommand*{\boldn}{\ensuremath{\myvec{n}}\xspace}
\newcommand*{\boldtheta}{\ensuremath{\myvec{\theta}}\xspace}
\newcommand*{\boldalpha}{\ensuremath{\myvec{\alpha}}\xspace}
\newcommand*{\boldphi}{\ensuremath{\myvec{\phi}}\xspace}
\newcommand*{\boldgamma}{\ensuremath{\myvec{\gamma}}\xspace}


% Global significance
\newcommand*{\zmaxlocal}{\ensuremath{z_{\text{local}}^{\text{max}}}\xspace}
\newcommand*{\Zmaxlocal}{\ensuremath{Z_{\text{local}}^{\text{max}}}\xspace}
\newcommand*{\pglobal}{\ensuremath{p_{\text{global}}}\xspace}

% From thesis guide v9.0.0:
% Extra commands to copy with separate statistical and systematic
% errors as well as asymmetric errors
\newcommand*\valuesep{\,}
\sisetup{number-unit-product = \valuesep}

% Error with text
\newcommand*\numerrt[3][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{\pm \num{#2}\valuesep\text{(#3)}}%
  \endgroup
}

% Asymmetric error
\newcommand*\numpmerr[3][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{^{\num[retain-explicit-plus]{#2}}_{\num{#3}}}%
  \endgroup
}

% Asymmetric error with text
\newcommand*\numpmerrt[4][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{^{\num[retain-explicit-plus]{#2}}_{\num{#3}}%
    \valuesep\text{(#4)}}%
  \endgroup
}

\newcommand*\SIpmerr[5][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}\valuesep\numpmerr{#3}{#4})\valuesep{\si{#5}}}%
  \endgroup
}

\newcommand*\SIerrt[5][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}\valuesep\numerrt{#3}{#4})\valuesep{(#5)}}%
  \endgroup
}

\newcommand*\SIerrtt[7][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}%
    \valuesep\numerrt{#3}{#4}%
    \valuesep\numerrt{#5}{#6})%
    \valuesep{(#7)}}%
  \endgroup
}

\newcommand*\SIpmerrt[6][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}%
    \valuesep\numpmerrt{#3}{#4}{#5})%
    \valuesep\si{#6}}%
  \endgroup
}

\newcommand*\SIpmerrtt[9][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}%
    \valuesep\numpmerrt{#3}{#4}{#5}%
    \valuesep\numpmerrt{#6}{#7}{#8})%
    \valuesep\si{#9}}%
  \endgroup
}

\newcommand*\SIerrs[5][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}%
    \valuesep\numerrt{#3}{stat.}%
    \valuesep\numerrt{#4}{sys.})%
    \valuesep\si{#5}}%
  \endgroup
}

\newcommand*\SIpmerrs[7][]{%
  \begingroup
  \sisetup{#1}%
  \ensuremath{(\num{#2}
    \valuesep\numpmerrt{#3}{#4}{stat.}
    \valuesep\numpmerrt{#5}{#6}{sys.})%
    \valuesep\si{#7}}%
  \endgroup
}
